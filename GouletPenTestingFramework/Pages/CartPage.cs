using Microsoft.VisualStudio.TestTools.UnitTesting;
using OpenQA.Selenium;
using OpenQA.Selenium.Support.PageObjects;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using static GouletPenTestingFramework.Entities.Entities;

namespace GouletPenTestingFramework.Pages
{
    public class CartPage:GouletPenBasePage
    {
        private string url = @"http://www.gouletpens.com/cart";

        [FindsBy(How = How.ClassName, Using = "cart-product-title")]
        public IList<IWebElement> Products { get; set; }

        public CartPage(IWebDriver browser)
        {
            Driver = browser;
            Url = url;
            PageFactory.InitElements(browser, this);
        }


        public void VerifyAddToCart(Product product)
        {
            var cartProducts = Products.ToList();
            Assert.IsTrue(cartProducts.Any(p => p.Text==product.ProductName));

            var cartProduct = cartProducts.FirstOrDefault(p => p.Text == product.ProductName);
            var href=cartProduct.GetAttribute("href");
            Assert.IsTrue(href.Contains(product.ProductCode));
        }
    }
}
